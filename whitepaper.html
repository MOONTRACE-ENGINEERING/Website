<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Moontrace Engineering | Whitepaper Download</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap">
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap"
    rel="stylesheet"
  />

  <style>
    :root {
      --color-primary: #1e3a8a;
      --color-secondary: #3b82f6;
      --color-text-primary: #111827;
      --color-text-secondary: #4b5563;
      --color-background: #f9fafb;
      --color-surface: #ffffff;
      --font-body: "Inter", sans-serif;
    }
    body {
      font-family: var(--font-body);
      color: var(--color-text-primary);
      background-color: var(--color-background);
    }
    .form-input {
      background-color: #f9fafb;
      border: 1px solid #d1d5db;
      color: var(--color-text-primary);
      padding: 0.875rem 1rem;
      border-radius: 0.5rem;
      width: 100%;
      transition: all 0.2s ease-in-out;
      font-weight: 500;
    }
    .form-input:focus {
      outline: none;
      border-color: var(--color-secondary);
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
      background-color: var(--color-surface);
    }
    .form-input.valid {
      border-color: #10b981;
    }
    .form-input.invalid {
      border-color: #ef4444;
    }
    .submit-button {
      background-image: linear-gradient(to right, var(--color-secondary), var(--color-primary));
      color: white;
      font-weight: 700;
      padding: 0.875rem 1.5rem;
      border-radius: 0.5rem;
      border: none;
      cursor: pointer;
      transition: all 0.3s ease-in-out;
      width: 100%;
      background-size: 200% auto;
    }
    .submit-button:hover {
      background-position: right center;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    .submit-button:disabled {
      background-image: none;
      background-color: #9ca3af;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }
    .back-link {
      color: var(--color-text-secondary);
      font-weight: 600;
      text-decoration: none;
      transition: color 0.2s;
    }
    .back-link:hover {
      color: var(--color-primary);
    }
    .list-icon {
      color: var(--color-secondary);
    }
    .main-container {
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15);
      border: 1px solid #e5e7eb;
    }
    .form-message {
      padding: 0.75rem 1rem;
      border-radius: 0.5rem;
      font-weight: 500;
      margin-bottom: 1.25rem;
      text-align: center;
    }
    .form-message-success {
      background-color: #d1fae5;
      color: #065f46;
    }
    .form-message-error {
      background-color: #fee2e2;
      color: #991b1b;
    }
  </style>
</head>

<body class="flex items-center justify-center min-h-screen p-4 sm:p-6 lg:p-8">
  <div class="w-full max-w-6xl mx-auto">
    <div class="main-container grid grid-cols-1 lg:grid-cols-2 bg-white rounded-2xl overflow-hidden">
      
      <!-- Left Side -->
      <div class="flex flex-col justify-center p-8 sm:p-12 lg:p-16">
        <div class="flex items-center justify-between mb-8">
          <a href="index.html" class="inline-block">
            <div class="text-xl tracking-wider flex items-center gap-2">
              <span class="font-bold text-black text-lg">MOONTRACE</span>
              <span class="font-normal text-red-600 text-base">|</span>
              <span class="font-normal text-gray-700 text-base">ENGINEERING</span>
            </div>
          </a>
        </div>

        <h1 class="text-3xl lg:text-4xl font-extrabold tracking-tight text-gray-900 mb-6">
          Quantum-Ready Today: A Guide to Securing Digital Infrastructure
        </h1>
        <p class="text-lg text-gray-600 mb-8 leading-relaxed">
          The advent of quantum computing poses a fundamental threat to classical cryptography. Our whitepaper provides a comprehensive overview of this disruption and our full-stack platform designed to manage the entire cryptographic lifecycle.
        </p>

        <h2 class="text-xl font-bold text-gray-800 mb-4">What You'll Learn:</h2>
        <ul class="space-y-4 mb-10">
          <li class="flex items-start gap-3">
            <svg xmlns="http://www.w3.org/2000/svg" class="list-icon flex-shrink-0 w-6 h-6 mt-1" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 1.944A11.954 11.954 0 012.166 5C2.056 5.649 2 6.319 2 7c0 5.225 3.34 9.67 8 11.317C14.66 16.67 18 12.225 18 7c0-.682-.057-1.35-.166-2.001A11.954 11.954 0 0110 1.944zM8.5 12.5a1 1 0 01-1.414 0l-2-2a1 1 0 111.414-1.414L8 10.086l3.5-3.5a1 1 0 111.414 1.414l-4 4z" clip-rule="evenodd" /></svg>
            <span><strong>The Imminent Quantum Threat:</strong> Understand "Harvest Now, Decrypt Later" attacks and why the risk is already here.</span>
          </li>
          <li class="flex items-start gap-3">
            <svg xmlns="http://www.w3.org/2000/svg" class="list-icon flex-shrink-0 w-6 h-6 mt-1" viewBox="0 0 20 20" fill="currentColor"><path d="M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a1 1 0 011-1h14a1 1 0 110 2H3a1 1 0 01-1-1z" /></svg>
            <span><strong>A Step-by-Step Migration Path:</strong> Learn about our four-stage process for a seamless transition to a quantum-safe posture.</span>
          </li>
          <li class="flex items-start gap-3">
            <svg xmlns="http://www.w3.org/2000/svg" class="list-icon flex-shrink-0 w-6 h-6 mt-1" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.982.034 2.285-.948 2.286-1.56.38-1.56 2.6 0 2.98.982.54 2.285-.034 2.286.948-.836 1.372.734 2.942 2.106 2.106.982-.54 2.285.034.948 2.286.38 1.56 2.6 1.56 2.98 0 .982-.54 2.285.034 2.286-.948 1.372.836 2.942-.734 2.106-2.106-.54-.982-.034-2.285.948-2.286 1.56-.38 1.56-2.6 0-2.98-.982-.54-2.285.034-.948-2.286.836-1.372-.734-2.942-2.106-2.106A1.532 1.532 0 0111.49 3.17zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd" /></svg>
            <span><strong>Our Cutting-Edge Tool Suite:</strong> Get an overview of VANTAGE, APX, Moontrace VPN, and QUBEX.</span>
          </li>
        </ul>
      </div>

      <!-- Right Side -->
      <div class="bg-gray-50 p-8 sm:p-12 lg:p-16 relative">
        <img src="assets/button.png"Shield Icon" class="absolute top-8 right-8 w-12 h-12 hidden sm:block" onerror="this.onerror=null;this.src='assets/button.png';">

        <h3 class="text-2xl font-bold text-gray-900 mt-8 mb-4">Access the Whitepaper</h3>
        <p class="mt-2 text-gray-600">Fill out the form below to get your free copy.</p>
        
        <!-- FormSpree Integration: The 'action' attribute is updated to your Formspree endpoint. -->
        <form id="whitepaperForm" action="https://formspree.io/f/xpwlozaq" method="POST" class="mt-8 space-y-5" novalidate>
          <input type="text" name="website" id="website" class="hidden" tabindex="-1" autocomplete="off">

          <div class="grid grid-cols-1 sm:grid-cols-2 gap-5">
            <div>
              <label for="firstName" class="block text-sm font-medium text-gray-700 mb-1">First Name *</label>
              <input type="text" id="firstName" name="firstName" class="form-input" required>
            </div>
            <div>
              <label for="lastName" class="block text-sm font-medium text-gray-700 mb-1">Last Name *</label>
              <input type="text" id="lastName" name="lastName" class="form-input" required>
            </div>
          </div>

          <div>
            <label for="companyName" class="block text-sm font-medium text-gray-700 mb-1">Company Name *</label>
            <input type="text" id="companyName" name="companyName" class="form-input" required>
          </div>

          <div>
            <label for="businessEmail" class="block text-sm font-medium text-gray-700 mb-1">Business Email *</label>
            <input type="email" id="businessEmail" name="businessEmail" class="form-input" required aria-describedby="emailError">
            <p id="emailError" class="text-red-600 text-sm mt-1 hidden" aria-live="polite">
              Please enter a valid organizational email address.
            </p>
          </div>

          <div id="formMessageContainer" aria-live="polite"></div>

          <div class="pt-2">
            <button type="submit" class="submit-button mt-4 sm:mt-0">Download Now</button>
          </div>
        </form>

        <div class="mt-8 text-center">
          <a href="index.html" class="back-link inline-flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18" /></svg>
            Back to Home
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Script -->
  <script defer>
    document.addEventListener('DOMContentLoaded', function () {
      const whitepaperForm = document.getElementById('whitepaperForm');
      const businessEmailInput = document.getElementById('businessEmail');
      const emailError = document.getElementById('emailError');
      const messageContainer = document.getElementById('formMessageContainer');

      const nonOrgEmailDomains = [
        'gmail.com', 'yahoo.com', 'hotmail.com', 'outlook.com',
        'aol.com', 'icloud.com', 'live.com', 'msn.com'
      ];

      function isValidOrganizationalEmail(email) {
        if (!email || email.indexOf('@') === -1) return false;
        const domain = email.split('@')[1].toLowerCase();
        return !nonOrgEmailDomains.includes(domain);
      }

      function showMessage(message, isSuccess) {
        messageContainer.innerHTML = '';
        const messageDiv = document.createElement('div');
        messageDiv.className = isSuccess ? 'form-message form-message-success' : 'form-message form-message-error';
        messageDiv.innerHTML = message;
        messageContainer.appendChild(messageDiv);
      }

      businessEmailInput.addEventListener('input', () => {
        businessEmailInput.classList.remove('invalid', 'valid');
        emailError.classList.add('hidden');
      });

      whitepaperForm.addEventListener('submit', async function (event) {
        event.preventDefault();
        messageContainer.innerHTML = '';

        // Honeypot check
        if (whitepaperForm.website && whitepaperForm.website.value) {
          return;
        }

        // Basic HTML5 validation check
        if (!whitepaperForm.checkValidity()) {
          whitepaperForm.reportValidity();
          return;
        }

        // Custom email validation
        if (!isValidOrganizationalEmail(businessEmailInput.value)) {
          emailError.classList.remove('hidden');
          businessEmailInput.focus();
          businessEmailInput.classList.add('invalid');
          businessEmailInput.setAttribute('aria-invalid', 'true');
          return;
        } else {
          businessEmailInput.classList.remove('invalid');
          businessEmailInput.classList.add('valid');
          businessEmailInput.removeAttribute('aria-invalid');
        }

        const form = event.target;
        const formData = new FormData(form);
        const submitButton = form.querySelector('.submit-button');
        submitButton.textContent = 'Processing...';
        submitButton.disabled = true;

        // --- FormSpree Submission Logic ---
        try {
          const response = await fetch(form.action, {
            method: form.method,
            body: formData,
            headers: {
                'Accept': 'application/json'
            }
          });

          if (response.ok) {
            // If submission to Formspree is successful
            const pdfUrl = 'assets/pdfs/whitepaper.pdf'; // Ensure this path is correct
            window.open(pdfUrl, '_blank');

            showMessage(
              `âœ… Success! Your whitepaper should open in a new tab. 
              <br><a href="${pdfUrl}" target="_blank" rel="noopener" class="underline text-blue-700">Click here</a> if it didn't.`,
              true
            );
            whitepaperForm.reset();
            // Reset validation styles
            businessEmailInput.classList.remove('valid', 'invalid');

          } else {
            // If Formspree returns an error
            const data = await response.json();
            if (Object.hasOwn(data, 'errors')) {
                const errorMessages = data["errors"].map(error => error["message"]).join(", ");
                showMessage(`Could not submit form: ${errorMessages}`, false);
            } else {
                showMessage('An error occurred while submitting the form. Please try again.', false);
            }
          }
        } catch (error) {
          // If there's a network error
          console.error('Submission error:', error);
          showMessage('A network error occurred. Please check your connection and try again.', false);
        } finally {
          // Re-enable the button
          submitButton.textContent = 'Download Now';
          submitButton.disabled = false;
        }
      });
    });
  </script>
</body>
</html>
